<!DOCTYPE html>
<html>
    <head>
    </head>

    <body>

        <div id="intestazione" class="divTitolo">
        </div>

        <div id="contenutoCV" style="margin-top: 40px">
        </div>

    </body>

    <script>
        let indiceCV = localStorage.getItem("id");

        caricaDatiCV(indiceCV);

        function caricaDatiCV(indice) {
            var file = new XMLHttpRequest();
            let nameFile = "https://raw.githubusercontent.com/alelallox/JavaScript-Works/refs/heads/main/cv-online/" + indice + ".json";
            
            file.open("GET", nameFile, true);
            file.send();
            
            file.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var jsonDoc = JSON.parse(file.responseText);
                    mostraInfoCV(jsonDoc, indice);
                }
            };
        }

        function mostraInfoCV(ogg, indice) {
            console.log(indice);

            let dati = document.createElement("p");

            dati.appendChild(document.createTextNode("Nome: " + ogg.Nome));
            dati.appendChild(document.createElement("br"));

            dati.appendChild(document.createTextNode("Cognome: " + ogg["Cognome "]));
            dati.appendChild(document.createElement("br"));

            dati.appendChild(document.createTextNode("Data di nascita: " + ogg["data di nascita"]));
            dati.appendChild(document.createElement("br"));

            dati.appendChild(document.createTextNode("Impiego: " + ogg["impieghi"]));
            dati.appendChild(document.createElement("br"));

            dati.appendChild(document.createTextNode("Hobby: " + ogg["hobby"]));
            dati.appendChild(document.createElement("br"));
            
            document.getElementById("contenutoCV").appendChild(dati);
        }
    </script>

</html>
