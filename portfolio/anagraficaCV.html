<html>
    <head>
        <link rel="stylesheet" href="Style.css">
    </head>

    <body>

        <div id="formIngr" class="generale"> 
            <div class="form">
                <h1 class="Titolo"> Anagrafica JSON </h1>
                <input type="button" onclick="caricaDati()" value="Carica dati">
            </div>
            <br>
        </div>

        <div id="risForm" style="visibility: hidden;">
            <div id="stringaJSON"> </div>
        </div>

    </body>

    <script>
        function caricaDati() {
            var file = new XMLHttpRequest();
            file.open("GET", "https://raw.githubusercontent.com/alelallox/JavaScript-Works/refs/heads/main/letturajson/datiAnagrafica.json", true);
            file.send();
        
            file.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var jsonDoc = JSON.parse(file.responseText);
                    mostraInfo(jsonDoc);
                }
            };
        
            document.getElementById("formIngr").style.width = "0px";
            document.getElementById("formIngr").style.visibility = "hidden";
            document.getElementById("risForm").style.visibility = "visible";
        }
        
        function mostraInfo(ogg) {
            var tabella = document.createElement("table");
            var colonnaIndici = ["Immagine", "Nome", "Cognome", "Età", "Indirizzo", "Città", "Telefono 1", "Telefono 2", "Sport 1", "Sport 2", "Portfolio"];
            var colonnaTit = document.createElement("tr");
        
            for (let i = 0; i < colonnaIndici.length; i++) {
                var righe = document.createElement("th");
                righe.appendChild(document.createTextNode(colonnaIndici[i]));
                colonnaTit.appendChild(righe);
            }
        
            tabella.appendChild(colonnaTit);
        
            for (let i = 0; i < ogg.Anagrafica.length; i++) {
                var colonna = document.createElement("tr");
        
                var rigaNome = document.createElement("td");
                rigaNome.appendChild(document.createTextNode(ogg.Anagrafica[i].Nome));
        
                var rigaCognome = document.createElement("td");
                rigaCognome.appendChild(document.createTextNode(ogg.Anagrafica[i].Cognome));
        
                var rigaEta = document.createElement("td");
                rigaEta.appendChild(document.createTextNode(ogg.Anagrafica[i].Eta));
        
                var rigaIndirizzo = document.createElement("td");
                rigaIndirizzo.appendChild(document.createTextNode(ogg.Anagrafica[i].Indirizzo));
        
                var rigaCitta = document.createElement("td");
                rigaCitta.appendChild(document.createTextNode(ogg.Anagrafica[i].Citta));
        
                var rigaTelefono1 = document.createElement("td");
                rigaTelefono1.appendChild(document.createTextNode(ogg.Anagrafica[i].Telefoni[0].Telefono1 == undefined ? "" : ogg.Anagrafica[i].Telefoni[0].Telefono1));
        
                var rigaTelefono2 = document.createElement("td");
                rigaTelefono2.appendChild(document.createTextNode(ogg.Anagrafica[i].Telefoni[1].Telefono2 == undefined ? "" : ogg.Anagrafica[i].Telefoni[1].Telefono2));
        
                var rigaSport1 = document.createElement("td");
                rigaSport1.appendChild(document.createTextNode(ogg.Anagrafica[i].Sport[0].Sport1 == undefined ? "" : ogg.Anagrafica[i].Sport[0].Sport1));
        
                var rigaSport2 = document.createElement("td");
                rigaSport2.appendChild(document.createTextNode(ogg.Anagrafica[i].Sport[1].Sport2 == undefined ? "" : ogg.Anagrafica[i].Sport[1].Sport2));
        
                // Colonna Portfolio
                var immagineCellPortfolio = document.createElement("td");
                immagineCellPortfolio.classList.add("portfolioColumn"); // Aggiungi la classe per la colonna
        
                var linkPortfolio = document.createElement("a");
                linkPortfolio.href = `portfolio.html?id=${ogg.Anagrafica[i].id}`;
                linkPortfolio.target = "_blank";
                linkPortfolio.classList.add("portfolioLink"); // Aggiungi la classe per il link
        
                var imgPortfolio = document.createElement("img");
                imgPortfolio.src = ogg.Anagrafica[i].Portfolio === undefined ? "" : ogg.Anagrafica[i].Portfolio;
                imgPortfolio.alt = "Portfolio di " + ogg.Anagrafica[i].Nome;
                imgPortfolio.classList.add("portfolioImage"); // Aggiungi la classe per l'immagine del portfolio
        
                linkPortfolio.appendChild(imgPortfolio);
                immagineCellPortfolio.appendChild(linkPortfolio);
        
                // Aggiunta della descrizione del portfolio
                var descrizionePortfolio = document.createElement("td");
                descrizionePortfolio.classList.add("portfolioDescription"); // Aggiungi la classe per la descrizione
        
                var descrizioneTesto = document.createElement("p");
                descrizioneTesto.textContent = ogg.Anagrafica[i].DescrizionePortfolio || "Descrizione non disponibile.";
                descrizionePortfolio.appendChild(descrizioneTesto);
        
                // Aggiungi tutte le celle alla colonna
                colonna.appendChild(
                colonna.appendChild(rigaNome);
                colonna.appendChild(rigaCognome);
                colonna.appendChild(rigaEta);
                colonna.appendChild(rigaIndirizzo);
                colonna.appendChild(rigaCitta);
                colonna.appendChild(rigaTelefono1);
                colonna.appendChild(rigaTelefono2);
                colonna.appendChild(rigaSport1);
                colonna.appendChild(rigaSport2);
                colonna.appendChild(immagineCellPortfolio);
        
                tabella.appendChild(colonna);
            }
        
            document.getElementById("stringaJSON").appendChild(tabella);
        }
    </script>
</html>
